<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WantToWin - Making the Odds for You</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        // ⚠️ SETUP STEP 1A: Replace with your EmailJS User ID
        emailjs.init('AefX1sL9Wjlv6CXnz'); // ← UPDATE THIS LINE
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
            background-color: #000;
            color: #fff;
        }
        .active-tab {
            color: #ef4444;
        }
        .active-tab::after {
            width: 100%;
            background: #ef4444;
        }
        .nav-link {
            position: relative;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: white;
            transition: width 0.3s;
        }
        .nav-link:hover::after {
            width: 100%;
        }
        .shop-item {
            transition: all 0.3s ease;
        }
        .shop-item:hover {
            transform: translateY(-5px);
        }
        .chat-message {
            max-width: 80%;
            padding: 8px 12px;
            border-radius: 12px;
            margin-bottom: 10px;
        }
        .user-message {
            background-color: #ef4444;
            margin-left: auto;
        }
        .admin-message {
            background-color: #374151;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="py-6 px-4 md:px-12 flex justify-between items-center border-b border-gray-800">
        <div class="flex items-center">
            <a href="#shop" class="text-2xl font-bold tracking-tight">
                <span class="text-red-500">WantToWin</span>
            </a>
        </div>
       <div class="hidden md:flex space-x-8 items-center">
    <a href="#shop" id="shop-tab" class="nav-link text-white font-medium active-tab">Shop</a>
    <a href="#contact" id="contact-tab" class="nav-link text-white font-medium">Contact</a>
    <a href="#information" id="information-tab" class="nav-link text-white font-medium">Information</a>
    <a href="#login" id="login-tab" class="nav-link text-white font-medium">Login</a>
    <a href="#cart" id="cart-tab" class="nav-link text-white font-medium">Cart</a>
</div>

<!-- ADD THIS RIGHT AFTER THE ABOVE DIV -->
<div id="user-info" class="hidden items-center space-x-4">
    <span id="user-email" class="text-white"></span>
    <button id="logout-btn" class="text-red-500 hover:text-red-400 font-medium">Logout</button>
</div>
        <div class="flex items-center space-x-4">
            <button class="md:hidden text-white" id="mobile-menu-btn">
                <i data-feather="menu"></i>
            </button>
        </div>
    </nav>

 <div id="mobile-menu" class="hidden md:hidden bg-gray-900 py-2 px-4 border-b border-gray-800">
    <a href="#shop" class="block py-2 text-white">Shop</a>
    <a href="#contact" class="block py-2 text-white">Contact</a>
    <a href="#information" class="block py-2 text-white">Information</a>
    <a href="#login" id="mobile-login" class="block py-2 text-white">Login</a>
    <div id="mobile-user-info" class="hidden">
        <span id="mobile-user-email" class="block py-2 text-white"></span>
        <button id="mobile-logout" class="block py-2 text-red-500 w-full text-left">Logout</button>
    </div>
    <a href="#cart" class="block py-2 text-white">Cart</a>
</div>

    <!-- Shop Section -->
    <section id="shop" class="tab-section py-16 px-4 md:px-12">
        <div class="max-w-6xl mx-auto">
            <h1 class="text-4xl font-bold mb-12">Shop</h1>
            
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Item 1 -->
                <div class="shop-item bg-gray-900 rounded-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c2hvZXN8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60" alt="Premium Shoes" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2">Premium Shoes</h3>
                        <p class="text-gray-400 mb-4">High-quality premium shoes for winners</p>
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-medium">₪100</span>
                            <button class="text-red-500 hover:text-red-400 font-medium add-to-cart" 
                                    data-name="Premium Shoes" 
                                    data-price="100" 
                                    data-image="https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c2hvZXN8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60">Add to Cart</button>
                        </div>
                    </div>
                </div>
                
                <!-- Item 2 -->
                <div class="shop-item bg-gray-900 rounded-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8d2F0Y2h8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60" alt="Luxury Watch" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2">Luxury Watch</h3>
                        <p class="text-gray-400 mb-4">Elegant timepiece for successful people</p>
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-medium">₪1000</span>
                            <button class="text-red-500 hover:text-red-400 font-medium add-to-cart" 
                                    data-name="Luxury Watch" 
                                    data-price="1000" 
                                    data-image="https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8d2F0Y2h8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=500&q=60">Add to Cart</button>
                        </div>
                    </div>
                </div>
                
                <!-- Item 3 -->
                <div class="shop-item bg-gray-900 rounded-lg overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aGVhZHBob25lc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60" alt="Wireless Headphones" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2">Wireless Headphones</h3>
                        <p class="text-gray-400 mb-4">Premium sound quality for immersive experience</p>
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-medium">₪200</span>
                            <button class="text-red-500 hover:text-red-400 font-medium add-to-cart" 
                                    data-name="Wireless Headphones" 
                                    data-price="200" 
                                    data-image="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aGVhZHBob25lc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=500&q=60">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="tab-section hidden py-16 px-4 md:px-12 bg-gray-900">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold mb-12 text-center">Contact Us</h2>
            <div class="grid md:grid-cols-2 gap-12">
                <div>
                    <h3 class="text-xl font-bold mb-4">Send us a message</h3>
                    <form id="contact-form" class="space-y-4">
                        <div>
                            <input type="text" id="contact-name" placeholder="Your Name" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                        </div>
                        <div>
                            <input type="email" id="contact-email" placeholder="Your Email" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                        </div>
                        <div>
                            <textarea id="contact-message" placeholder="Your Message" rows="5" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required></textarea>
                        </div>
                        <button type="submit" class="bg-red-500 hover:bg-red-600 text-white px-8 py-3 rounded font-medium transition">
                            Send Message
                        </button>
                    </form>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Contact Information</h3>
                    <div class="space-y-6">
                        <div class="flex items-start">
                            <i data-feather="mail" class="text-red-500 mr-4 mt-1"></i>
                            <div>
                                <h4 class="font-medium">Email</h4>
                                <p class="text-gray-400">bezalelganam95@gmail.com</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i data-feather="phone" class="text-red-500 mr-4 mt-1"></i>
                            <div>
                                <h4 class="font-medium">Phone</h4>
                                <p class="text-gray-400">+1 (555) 123-4567</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i data-feather="map-pin" class="text-red-500 mr-4 mt-1"></i>
                            <div>
                                <h4 class="font-medium">Address</h4>
                                <p class="text-gray-400">123 Winner Street, Success City, SC 12345</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Information Section -->
    <section id="information" class="tab-section hidden py-16 px-4 md:px-12">
        <div class="max-w-6xl mx-auto text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-6">WantToWin</h2>
            <p class="text-xl text-gray-400 max-w-3xl mx-auto mb-12">
                We are making the odds for you
            </p>
            <div class="bg-gray-900 rounded-lg p-8 max-w-2xl mx-auto">
                <div class="space-y-6">
                    <div class="flex items-start">
                        <i data-feather="mail" class="text-red-500 mr-4 mt-1"></i>
                        <div class="text-left">
                            <h4 class="font-medium">Email</h4>
                            <p class="text-gray-400">bezalelganam95@gmail.com</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i data-feather="phone" class="text-red-500 mr-4 mt-1"></i>
                        <div class="text-left">
                            <h4 class="font-medium">Phone</h4>
                            <p class="text-gray-400">+1 (555) 123-4567</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Section -->
    <section id="login" class="tab-section hidden py-16 px-4 md:px-12 bg-gray-900">
        <div class="max-w-md mx-auto bg-black rounded-lg p-8 shadow-lg">
            <h1 class="text-3xl font-bold mb-8 text-center">Login</h1>
            
            <!-- Email Login Form -->
            <form id="login-form" class="space-y-6">
                <div>
                    <label for="email" class="block text-gray-400 mb-2">Email</label>
                    <input type="email" id="email" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                </div>
                <div>
                    <label for="password" class="block text-gray-400 mb-2">Password</label>
                    <input type="password" id="password" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                </div>
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <input type="checkbox" id="remember" class="mr-2">
                        <label for="remember" class="text-gray-400">Remember me</label>
                    </div>
                    <a href="#forgot-password" class="text-red-500 hover:text-red-400 text-sm forgot-password">Forgot password?</a>
                </div>
                <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded font-medium transition">
                    Sign In
                </button>
            </form>
            <div class="mt-6 text-center">
                <p class="text-gray-400">Don't have an account? <a href="#signup" class="text-red-500 hover:text-red-400 signup-link">Sign up</a></p>
            </div>
        </div>
    </section>

    <!-- Forgot Password Section -->
    <section id="forgot-password" class="tab-section hidden py-16 px-4 md:px-12 bg-gray-900">
        <div class="max-w-md mx-auto bg-black rounded-lg p-8 shadow-lg">
            <h1 class="text-3xl font-bold mb-8 text-center">Reset Password</h1>
            <form id="forgot-password-form" class="space-y-6">
                <div>
                    <label for="reset-email" class="block text-gray-400 mb-2">Email</label>
                    <input type="email" id="reset-email" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                </div>
                <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded font-medium transition">
                    Send Reset Link
                </button>
            </form>
            <div class="mt-6 text-center">
                <p class="text-gray-400">Remember your password? <a href="#login" class="text-red-500 hover:text-red-400 back-to-login">Back to Login</a></p>
            </div>
        </div>
    </section>

    <!-- Signup Section -->
    <section id="signup" class="tab-section hidden py-16 px-4 md:px-12 bg-gray-900">
        <div class="max-w-md mx-auto bg-black rounded-lg p-8 shadow-lg">
            <h1 class="text-3xl font-bold mb-8 text-center">Create Account</h1>
            
            <!-- Email Signup Form -->
            <form id="signup-form" class="space-y-6">
                <div>
                    <label for="name" class="block text-gray-400 mb-2">Full Name</label>
                    <input type="text" id="name" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                </div>
                <div>
                    <label for="signup-email" class="block text-gray-400 mb-2">Email</label>
                    <input type="email" id="signup-email" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                </div>
                <div>
                    <label for="signup-password" class="block text-gray-400 mb-2">Password</label>
                    <input type="password" id="signup-password" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                </div>
                <div>
                    <label for="confirm-password" class="block text-gray-400 mb-2">Confirm Password</label>
                    <input type="password" id="confirm-password" class="w-full bg-gray-800 text-white p-3 rounded focus:outline-none focus:ring-1 focus:ring-red-500" required>
                </div>
                <button type="submit" class="w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded font-medium transition">
                    Create Account
                </button>
            </form>
            <div class="mt-6 text-center">
                <p class="text-gray-400">Already have an account? <a href="#login" class="text-red-500 hover:text-red-400 back-to-login">Login</a></p>
            </div>
        </div>
    </section>

    <!-- Cart Section -->
    <section id="cart" class="tab-section hidden py-16 px-4 md:px-12">
        <div class="max-w-6xl mx-auto">
            <h1 class="text-3xl md:text-4xl font-bold mb-8">Your Cart</h1>
            
            <div id="cart-items" class="mb-8">
                <!-- Cart items will be dynamically inserted here -->
                <div id="empty-cart-message" class="text-center py-12">
                    <i data-feather="shopping-cart" class="w-12 h-12 mx-auto text-gray-500 mb-4"></i>
                    <p class="text-xl text-gray-400">Your cart is empty</p>
                    <a href="#shop" class="text-red-500 hover:text-red-400 mt-4 inline-block">Start Shopping</a>
                </div>
            </div>

            <div class="bg-gray-900 rounded-lg p-6">
                <div class="flex justify-between mb-4">
                    <span class="text-gray-400">Subtotal</span>
                    <span id="subtotal" class="font-medium">₪0</span>
                </div>
                <div class="flex justify-between mb-4">
                    <span class="text-gray-400">Shipping</span>
                    <span class="font-medium">Free</span>
                </div>
                <div class="flex justify-between mb-6 border-t border-gray-800 pt-4">
                    <span class="text-lg">Total</span>
                    <span id="total" class="text-xl font-bold">₪0</span>
                </div>
                <button id="checkout-btn" class="w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded font-medium transition">
                    Proceed to Checkout
                </button>
            </div>
        </div>
    </section>

    <!-- Admin Chat Button -->
    <button id="admin-chat-btn" class="fixed bottom-6 right-6 bg-red-500 text-white p-3 rounded-full shadow-lg hover:bg-red-600 transition">
        <i data-feather="message-circle"></i>
    </button>

    <!-- Admin Chat Modal -->
    <div id="admin-chat-modal" class="fixed bottom-24 right-6 w-80 bg-gray-900 rounded-lg shadow-xl border border-gray-700 hidden z-50">
        <div class="p-4 border-b border-gray-700 flex justify-between items-center">
            <h3 class="font-bold">Chat Support</h3>
            <button id="close-chat" class="text-gray-400 hover:text-white">
                <i data-feather="x"></i>
            </button>
        </div>
        <div id="chat-messages" class="p-4 h-64 overflow-y-auto">
            <!-- Messages will appear here -->
        </div>
        <div class="p-4 border-t border-gray-700">
            <input type="text" id="chat-input" class="w-full bg-gray-800 text-white p-2 rounded focus:outline-none focus:ring-1 focus:ring-red-500" placeholder="Type a message...">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
            
            // Initialize storage if not exists
            if (!localStorage.getItem('users')) {
                localStorage.setItem('users', JSON.stringify([]));
            }
            if (!localStorage.getItem('cart')) {
                localStorage.setItem('cart', JSON.stringify([]));
            }
            if (!localStorage.getItem('chats')) {
                localStorage.setItem('chats', JSON.stringify({}));
            }
            if (!localStorage.getItem('chatSessionId')) {
                localStorage.setItem('chatSessionId', Date.now().toString());
            }

            // Tab functionality
          

    function handleHashChange() {
    const hash = window.location.hash.substring(1);
    const validSections = ['shop', 'contact', 'information', 'login', 'cart', 'forgot-password', 'signup'];
    
    console.log('Hash changed to:', hash);
    
    if (validSections.includes(hash)) {
        console.log('Valid section:', hash);
        
        // Update active tab
        document.querySelectorAll('[id$="-tab"]').forEach(t => {
            t.classList.remove('active-tab');
        });
        
        const activeTab = document.getElementById(`${hash}-tab`);
        if (activeTab) {
            activeTab.classList.add('active-tab');
            console.log('Activated tab:', activeTab.id);
        }
        
        // Hide all sections
        document.querySelectorAll('.tab-section').forEach(section => {
            section.style.display = 'none'; // Force hide
            section.classList.add('hidden');
        });
        
        // Show corresponding section
        const targetSection = document.getElementById(hash);
        if (targetSection) {
            targetSection.style.display = 'block'; // Force show
            targetSection.classList.remove('hidden');
            console.log('Showing section:', hash);
        } else {
            console.log('Section not found:', hash);
        }
        
        // Special handling for sections
        if (hash === 'cart') {
            renderCart();
        } else if (hash === 'shop') {
            setTimeout(() => {
                setupAddToCartListeners();
            }, 100);
        }
    } else if (window.location.hash === '') {
        console.log('Empty hash, defaulting to shop');
        window.location.hash = 'shop';
    }
}
            // Add these lines after the handleHashChange function:
window.addEventListener('hashchange', handleHashChange);

// Mobile menu link handlers
document.querySelectorAll('#mobile-menu a').forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const sectionId = link.getAttribute('href').substring(1);
        window.location.hash = sectionId;
        mobileMenu.classList.add('hidden');
    });
});

            // Tab click handling
            document.querySelectorAll('[id$="-tab"]').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = tab.id.replace('-tab', '');
                    window.location.hash = sectionId;
                });
            });

           // Mobile menu toggle
const mobileMenuBtn = document.getElementById('mobile-menu-btn');
const mobileMenu = document.getElementById('mobile-menu');

mobileMenuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    feather.replace();
    
    // Re-setup add to cart listeners when mobile menu might affect layout
    if (window.location.hash === '#shop') {
        setTimeout(() => {
            setupAddToCartListeners();
        }, 100);
    }
});

// Add to cart functionality - SIMPLE VERSION
function setupAddToCartListeners() {
    document.querySelectorAll('.add-to-cart').forEach(button => {
        button.onclick = function() {
            const name = this.dataset.name;
            const price = parseFloat(this.dataset.price);
            const image = this.dataset.image;
            
            // Get user-specific cart
            const userEmail = localStorage.getItem('userEmail');
            const cartKey = userEmail ? `cart_${userEmail}` : 'cart_guest';
            const cart = JSON.parse(localStorage.getItem(cartKey)) || [];
            
            // Add new item
            cart.push({ name, price, image });
            localStorage.setItem(cartKey, JSON.stringify(cart));
            
            // Show success message
            alert(`${name} added to cart!`);
            
            // Update cart if we're on cart page
            if (window.location.hash === '#cart') {
                renderCart();
            }
        };
    });
}

// Call this function initially
setupAddToCartListeners();
            // Contact form functionality
            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('contact-name').value;
                const email = document.getElementById('contact-email').value;
                const message = document.getElementById('contact-message').value;
                
                // Create email data
                const emailData = {
                    to_email: 'bezalelganam95@gmail.com',
                    from_name: name,
                    from_email: email,
                    message: message,
                    subject: `New Contact Form Message from ${name}`
                };
                
                // ⚠️ SETUP STEP 1B: Replace with your EmailJS Service ID and Template ID
                emailjs.send('service_76p23kb', 'template_l3l7so9', emailData)
                    .then(function(response) {
                        console.log('SUCCESS!', response.status, response.text);
                        alert('Thank you for your message! We will get back to you soon.');
                        document.getElementById('contact-form').reset();
                    }, function(error) {
                        console.log('FAILED...', error);
                        alert('There was an error sending your message. Please try again later.');
                    });
            });

           // Login form functionality
document.getElementById('login-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    
    // Get existing users
    const users = JSON.parse(localStorage.getItem('users')) || [];
    
    // Find user
    const user = users.find(user => user.email === email && user.password === password);
    
    if (user) {
        localStorage.setItem('isLoggedIn', 'true');
        localStorage.setItem('userEmail', email);
        localStorage.setItem('userName', user.name || email.split('@')[0]);
        
        // UPDATE NAVIGATION AND SHOW SUCCESS
        updateNavigation();
        alert('Login successful!');
        window.location.hash = 'shop';
    } else {
        alert('Invalid email or password. Please try again or sign up.');
    }
});

            // Forgot password form functionality - FIXED
            document.getElementById('forgot-password-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = document.getElementById('reset-email').value;
                
                // Get existing users
                const users = JSON.parse(localStorage.getItem('users')) || [];
                
                // Check if user exists
                const userExists = users.some(user => user.email === email);
                
                if (userExists) {
                    // Create email data for password reset
                    const resetEmailData = {
                        to_email: email,
                        from_name: 'WantToWin Support',
                        from_email: 'bezalelganam95@gmail.com',
                        subject: 'Password Reset Request',
                        message: `You requested a password reset. Please click the link below to reset your password:\n\nReset Link: https://yourwebsite.com/reset-password?token=random123\n\nIf you didn't request this, please ignore this email.`
                    };
                    
                    // Send reset email using EmailJS
                    emailjs.send('service_76p23kb', 'template_l3l7so9', resetEmailData)
                        .then(function(response) {
                            console.log('SUCCESS!', response.status, response.text);
                            alert('Password reset link has been sent to your email.');
                            window.location.hash = 'login';
                        }, function(error) {
                            console.log('FAILED...', error);
                            alert('There was an error sending the reset email. Please try again later.');
                        });
                } else {
                    alert('No account found with this email address.');
                }
            });

            // Signup form functionality
            document.getElementById('signup-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('name').value;
                const email = document.getElementById('signup-email').value;
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                
                // Validate passwords match
                if (password !== confirmPassword) {
                    alert('Passwords do not match!');
                    return;
                }
                
                // Get existing users
                const users = JSON.parse(localStorage.getItem('users')) || [];
                
                // Check if user already exists
                if (users.some(user => user.email === email)) {
                    alert('This email is already registered!');
                    return;
                }
                
                // Add new user
                users.push({
                    name: name,
                    email: email,
                    password: password
                });
                
                // Save to localStorage
                localStorage.setItem('users', JSON.stringify(users));
                
                // Redirect to login
                alert('Account created successfully! Please login.');
                window.location.hash = 'login';
            });

            // Navigation links
            document.querySelectorAll('.forgot-password').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.location.hash = 'forgot-password';
                });
            });

            document.querySelectorAll('.signup-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.location.hash = 'signup';
                });
            });

            document.querySelectorAll('.back-to-login').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.location.hash = 'login';
                });
            });

 // Cart functionality - SIMPLE FIX
function renderCart() {
    // Get user-specific cart
    const userEmail = localStorage.getItem('userEmail');
    const cartKey = userEmail ? `cart_${userEmail}` : 'cart_guest';
    const cart = JSON.parse(localStorage.getItem(cartKey)) || [];
    
    const cartItemsEl = document.getElementById('cart-items');
    const emptyCartMessage = document.getElementById('empty-cart-message');
    const subtotalEl = document.getElementById('subtotal');
    const totalEl = document.getElementById('total');

    if (cart.length === 0) {
        emptyCartMessage.classList.remove('hidden');
        cartItemsEl.innerHTML = '';
        cartItemsEl.appendChild(emptyCartMessage);
        subtotalEl.textContent = '₪0';
        totalEl.textContent = '₪0';
        return;
    }

    emptyCartMessage.classList.add('hidden');
    
    let html = '';
    let subtotal = 0;
    
    cart.forEach((item, index) => {
        subtotal += parseFloat(item.price);
        html += `
            <div class="flex items-center justify-between py-4 border-b border-gray-800">
                <div class="flex items-center">
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded">
                    <div class="ml-4">
                        <h3 class="font-medium">${item.name}</h3>
                        <p class="text-gray-400">₪${item.price}</p>
                    </div>
                </div>
                <button class="text-red-500 hover:text-red-400 remove-item" data-index="${index}" onclick="removeFromCart(${index})">
                    <i data-feather="trash-2"></i>
                </button>
            </div>
        `;
    });

    cartItemsEl.innerHTML = html;
    subtotalEl.textContent = `₪${subtotal.toFixed(2)}`;
    totalEl.textContent = `₪${subtotal.toFixed(2)}`;
    feather.replace();
}

// ADD THIS SIMPLE FUNCTION OUTSIDE renderCart():
function removeFromCart(index) {
    const userEmail = localStorage.getItem('userEmail');
    const cartKey = userEmail ? `cart_${userEmail}` : 'cart_guest';
    const cart = JSON.parse(localStorage.getItem(cartKey)) || [];
    
    cart.splice(index, 1);
    localStorage.setItem(cartKey, JSON.stringify(cart));
    renderCart();
}
            

           // Checkout button
document.getElementById('checkout-btn').addEventListener('click', function() {
    const userEmail = localStorage.getItem('userEmail');
    const cartKey = userEmail ? `cart_${userEmail}` : 'cart_guest';
    const cart = JSON.parse(localStorage.getItem(cartKey)) || [];
    
    if (cart.length > 0) {
        // Save order to track it
        const orders = JSON.parse(localStorage.getItem('orders')) || [];
        const order = {
            id: Date.now(),
            userEmail: userEmail || 'guest',
            items: cart,
            total: cart.reduce((sum, item) => sum + item.price, 0),
            date: new Date().toLocaleString()
        };
        orders.push(order);
        localStorage.setItem('orders', JSON.stringify(orders));
        
        alert('Thank you for your order! We will process it shortly.');
        localStorage.setItem(cartKey, JSON.stringify([]));
        renderCart();
    }
});
            // Function to view all orders (for admin)
function viewAllOrders() {
    const orders = JSON.parse(localStorage.getItem('orders')) || [];
    console.log('All Orders:', orders);
    // You can create an admin page to display these
}

// Call this function to see all orders in console
// viewAllOrders();

            // Chat functionality
            const chatBtn = document.getElementById('admin-chat-btn');
            const chatModal = document.getElementById('admin-chat-modal');
            const chatInput = document.getElementById('chat-input');
            const chatMessages = document.getElementById('chat-messages');
            const closeChat = document.getElementById('close-chat');
            
            // Load chat history
            const chatSessionId = localStorage.getItem('chatSessionId');
            const chats = JSON.parse(localStorage.getItem('chats')) || {};
            if (chats[chatSessionId]) {
                chats[chatSessionId].forEach(msg => {
                    const messageClass = msg.isAdmin ? 'admin-message' : 'user-message';
                    chatMessages.innerHTML += `
                        <div class="chat-message ${messageClass}">
                            ${msg.message}
                        </div>
                    `;
                });
            } else {
                // Initialize with welcome message
                chatMessages.innerHTML = `
                    <div class="chat-message admin-message">
                        Welcome! How can we help you today?
                    </div>
                `;
                chats[chatSessionId] = [{ message: "Welcome! How can we help you today?", isAdmin: true }];
                localStorage.setItem('chats', JSON.stringify(chats));
            }

            // Toggle chat visibility
            chatBtn.addEventListener('click', () => {
                chatModal.classList.toggle('hidden');
                feather.replace();
            });

            closeChat.addEventListener('click', () => {
                chatModal.classList.add('hidden');
            });

            // Handle chat input
            chatInput.addEventListener('keypress', (e) => {
                if(e.key === 'Enter' && e.target.value.trim()) {
                    const message = e.target.value;
                    
                    // Add user message
                    chatMessages.innerHTML += `
                        <div class="chat-message user-message">
                            ${message}
                        </div>
                    `;
                    
                    // Save to chat history
                    chats[chatSessionId].push({ message: message, isAdmin: false });
                    localStorage.setItem('chats', JSON.stringify(chats));
                    
                    e.target.value = '';
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Auto-response
                    setTimeout(() => {
                        const response = getAdminResponse(message);
                        chatMessages.innerHTML += `
                            <div class="chat-message admin-message">
                                ${response}
                            </div>
                        `;
                        chats[chatSessionId].push({ message: response, isAdmin: true });
                        localStorage.setItem('chats', JSON.stringify(chats));
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 1000);
                }
            });

            // Admin response function
            function getAdminResponse(message) {
                const lowerMessage = message.toLowerCase();
                
                if (lowerMessage.includes('price') || lowerMessage.includes('cost')) {
                    return "Our prices range from ₪100 to ₪1000. Is there a specific product you're interested in?";
                } else if (lowerMessage.includes('delivery') || lowerMessage.includes('shipping')) {
                    return "We offer free shipping on all orders. Delivery typically takes 3-5 business days.";
                } else if (lowerMessage.includes('return') || lowerMessage.includes('refund')) {
                    return "We have a 30-day return policy. If you're not satisfied with your purchase, you can return it for a full refund.";
                } else if (lowerMessage.includes('contact') || lowerMessage.includes('email')) {
                    return "You can reach us at bezalelganam95@gmail.com or through our contact form.";
                } else {
                    return "Thank you for your message. Our team will get back to you shortly with more information.";
                }
            }

            // Initialize first load
            if (!window.location.hash) {
                window.location.hash = 'shop';
            }
        });
        // Add this function to update the navigation based on login status
function updateNavigation() {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    const userEmail = localStorage.getItem('userEmail');
    
    // Desktop
    const loginTab = document.getElementById('login-tab');
    const userInfo = document.getElementById('user-info');
    const userEmailSpan = document.getElementById('user-email');
    
    // Mobile
    const mobileLogin = document.getElementById('mobile-login');
    const mobileUserInfo = document.getElementById('mobile-user-info');
    const mobileUserEmail = document.getElementById('mobile-user-email');
    
    if (isLoggedIn && userEmail) {
        // User is logged in
        loginTab.classList.add('hidden');
        userInfo.classList.remove('hidden');
        userInfo.classList.add('flex');
        userEmailSpan.textContent = userEmail;
        
        mobileLogin.classList.add('hidden');
        mobileUserInfo.classList.remove('hidden');
        mobileUserEmail.textContent = userEmail;
    } else {
        // User is not logged in
        loginTab.classList.remove('hidden');
        userInfo.classList.add('hidden');
        userInfo.classList.remove('flex');
        
        mobileLogin.classList.remove('hidden');
        mobileUserInfo.classList.add('hidden');
    }
}

// Add logout functionality
document.getElementById('logout-btn').addEventListener('click', function() {
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('userEmail');
    localStorage.removeItem('userName');
    updateNavigation();
    alert('You have been logged out.');
    window.location.hash = 'shop';
    // Refresh cart display if on cart page
    if (window.location.hash === '#cart') {
        renderCart();
    }
});

// Add mobile logout
document.getElementById('mobile-logout').addEventListener('click', function() {
    localStorage.removeItem('isLoggedIn');
    localStorage.removeItem('userEmail');
    localStorage.removeItem('userName');
    updateNavigation();
    alert('You have been logged out.');
    window.location.hash = 'shop';
});

// Initialize navigation on page load
updateNavigation();
    </script>
</body>
</html>
